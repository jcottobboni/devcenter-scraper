<p>The Heroku Cedar stack is capable of running a variety of types of Scala applications.</p>

<p>This document describes the general behavior of the Cedar stack as it relates to the recognition and execution of Scala applications. For a more detailed explanation of how to deploy an application, see:</p>

<p><a href="http://devcenter.heroku.com/articles/scala">Getting Started with Scala on Heroku/Cedar</a></p>

<h2 id="activation">Activation</h2>

<p>Scala applications are recognized when files matching any of the following patterns are found:</p>

<ul>
<li><code>/*.sbt</code></li>

<li><code>/project/*.scala</code></li>

<li><code>/project/build.properties</code></li>

<li><code>/.sbt/*.scala</code></li>
</ul><p>When a deployed application is recognized as a Scala application, Heroku responds with <code>-----&gt; Scala app detected</code>.</p>

<pre><code class="term">$ git push heroku master
-----&gt; Scala app detected</code></pre>

<p>If an application also contains a <code>/conf/application.conf</code> file, a Play 2.0 application is detected and Heroku responds with <code>-----&gt; Play 2.0 app detected</code>. Please see the <a href="/articles/play-support">Heroku Play Support</a> article for more information.</p>

<p>Scala applications that use Maven can be deployed as well, but they will be treated as Java applications, so <a href="/articles/java-support">Heroku Java Support</a> will apply.</p>

<h2 id="environment">Environment</h2>

<p>The following environment variables will be set:</p>

<ul>
<li>
<code>PATH</code>: <code>.sbt_home/bin:/usr/local/bin:/usr/bin:/bin</code>
</li>

<li>
<code>JAVA_OPTS</code>: <code>-Xmx384m -Xss512k -XX:+UseCompressedOops</code>
</li>

<li>
<code>SBT_OPTS</code>: <code>-Xmx384m -Xss512k -XX:+UseCompressedOops</code>
</li>

<li>
<code>REPO</code>: <code>/app/.sbt_home/.ivy2/cache</code>
</li>

<li>
<code>PORT</code>: HTTP port to which the web process should bind</li>

<li>
<code>DATABASE_URL</code>: URL of the <a href="/articles/heroku-postgresql">Heroku Postgres</a> database connection</li>
</ul><h2 id="build-behavior">Build behavior</h2>

<p>Applications must include a <code>/project/build.properties</code> file with the <code>sbt.version</code> property specifying a release version of SBT 0.11.0 - 0.12.3. SBT release candidates (i.e. RC versions) are not supported.</p>

<p>The Heroku Scala buildpack will run <code>sbt clean compile stage</code> to build the application. Applications must include a <code>stage</code> task, which performs any tasks needed to prepare an application to be run in-place. For example, Typesafe’s <a href="http://github.com/typesafehub/xsbt-start-script-plugin"><code>xbst-start-script-plugin</code></a> adds a <code>stage</code> task to SBT that generates start scripts for an application. To use the plugin, create a <code>/project/build.sbt</code> file containing:</p>

<pre><code>resolvers += Classpaths.typesafeResolver

addSbtPlugin("com.typesafe.startscript" % "xsbt-start-script-plugin" % "0.5.1")</code></pre>

<h2 id="runtime-behavior">Runtime behavior</h2>

<p>By default, Scala applications are launched with start script generated by the <a href="http://github.com/typesafehub/xsbt-start-script-plugin"><code>xbst-start-script-plugin</code></a>:</p>

<pre><code>web: target/start -Dhttp.port=$PORT $JAVA_OPTS</code></pre>

<p>If an application is not using the <a href="http://github.com/typesafehub/xsbt-start-script-plugin"><code>xbst-start-script-plugin</code></a> or should be launched in a different way, a custom <a href="https://devcenter.heroku.com/articles/procfile"><code>Procfile</code></a> can be included in the root of the project specifying a different entry for the <code>web</code> process.</p>

<h2 id="jvm-versions">JVM Versions</h2>

<p>By default, OpenJDK 1.6 is installed with your app. However, you can choose to use a newer JDK by specifying <code>java.runtime.version=1.7</code> in the <code>system.properties</code> file.</p>

<p>Here’s what a <code>system.properties</code> file looks like:</p>

<pre><code class="term">java.runtime.version=1.7</code></pre>

<p>You can specify 1.6, 1.7, or 1.8 (1.8 is in beta) for Java 6, 7, or 8 (with lambdas), respectively.</p>

<p>The JDK that your app uses will be included in the slug, which will affect your slug size.</p>

<h2 id="add-ons">Add-ons</h2>

<p>A Heroku Postgres starter-tier database add-on is automatically provisioned for Scala applications. This populates the <code>DATABASE_URL</code> environment variable.</p>