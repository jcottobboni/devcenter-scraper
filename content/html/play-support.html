
<p>The Heroku Cedar stack natively supports both Play framework 1.2.x, 2.x applications.</p>

<p>This document describes the general behavior of the <a href="https://devcenter.heroku.com/articles/cedar">Heroku Cedar stack</a> as it relates to the recognition and execution of Play framework applications. Play framework applications written in either Java or Scala can be run on Heroku.</p>

<p>For framework specific tutorials visit:</p>

<ul>
<li><a href="https://devcenter.heroku.com/articles/play">Getting Started with Play! on Heroku/Cedar</a></li>
</ul><p>You can also find a Play framework template application that can be cloned directly into your Heroku account at <a href="http://java.heroku.com">java.heroku.com</a>.</p>
<div class="note">

<p>If you have questions about Java on Heroku, consider discussing them in the <a href="https://discussion.heroku.com/category/java">Java on Heroku forums</a>.</p>

</div>
<h2 id="activation">Activation</h2>

<p>Heroku Play framework support will be applied to applications that match: <code>*/conf/application.conf</code> in any directory except for the modules directory</p>

<p>When a deployed application is recognized as a Play application, Heroku responds <code>-----&gt; Play! app detected</code> for Play 1.2.x apps, <code>-----&gt; Play 2.0 - Java app detected</code> for Play 2.0.x Java apps, or <code>-----&gt; Play 2.0 - Scala app detected</code> for Play 2.0.x Scala apps. Play 2.0.x language detection is based on file count and is for informational purposes only.</p>

<pre><code class="term">$ git push heroku master
-----&gt; Play! app detected</code></pre>

<h2 id="build-behavior">Build behavior</h2>

<h3 id="play-1-2-x">Play 1.2.x</h3>

<p>During the build phase of your application the following commands are run:</p>

<pre><code class="term">play dependencies --forProd --forceCopy --silent
play precompile --silent</code></pre>

<h3 id="play-2-x">Play 2.x</h3>

<p>Play 2.x uses SBT to build your application behind the scenes. On Heroku SBT will be called directly to build your app:</p>

<pre><code class="term">sbt clean compile stage</code></pre>

<p>The following directories are dropped from the slug after compilation, as they are not required at runtime:</p>

<ul>
<li>Ivy cache (persisted between builds of the same app)</li>

<li><code>project/boot</code></li>

<li><code>target/scala-*</code></li>

<li><code>target/streams</code></li>

<li><code>target/resolution-cache</code></li>
</ul><h2 id="environment">Environment</h2>

<p>The following environment variables will be set at first push:</p>

<h3 id="play-1-2-x">Play 1.2.x</h3>

<ul>
<li>
<code>PATH</code>: .play:.tools:/usr/local/bin:/usr/bin:/bin</li>

<li>
<code>JAVA_OPTS</code>: -Xmx384m -Xss512k -XX:+UseCompressedOops</li>

<li>
<code>PLAY_OPTS</code>: â€“%prod -Dprecompiled=true</li>

<li>
<code>PORT</code>: HTTP port to which the web process should bind</li>

<li>
<code>DATABASE_URL</code>: URL of the database connection</li>
</ul><h3 id="play-2-x">Play 2.x</h3>

<ul>
<li>
<code>PATH</code>: .sbt_home/bin:/usr/local/bin:/usr/bin:/bin</li>

<li>
<code>JAVA_OPTS</code>: -Xmx384m -Xss512k -XX:+UseCompressedOops</li>

<li>
<code>SBT_OPTS</code>: -Xmx384m -Xss512k -XX:+UseCompressedOops</li>

<li>
<code>REPO</code>: /app/.sbt_home/.ivy2/cache</li>

<li>
<code>DATABASE_URL</code>: URL of the database connection</li>
</ul><h2 id="runtime-behavior">Runtime behavior</h2>

<p>Heroku currently uses OpenJDK to run your application. OpenJDK versions 6 and 7 are available using a <code>system.properties</code> file. OpenJDK 8 with Lambdas is also available as an early preview. See the <a href="https://devcenter.heroku.com/categories/java">Java Tutorials</a> for more information.</p>

<h3 id="play-1-2-x">Play 1.2.x</h3>

<p>The default <code>web</code> process definition is:</p>

<pre><code>web: play run --http.port=\$PORT \$PLAY_OPTS</code></pre>

<h3 id="play-2-0-x-2-1-x">Play 2.0.x-2.1.x</h3>

<p>A start script is generated by the <a href="http://github.com/typesafehub/xsbt-start-script-plugin">xbst-start-script-plugin</a>. This start script is used by the default <code>web</code> process definition:</p>

<pre><code>web: target/start -Dhttp.port=$PORT $JAVA_OPTS</code></pre>

<h3 id="play-2-2">Play 2.2+</h3>

<p>The default web process is determined by examining output from the <a href="http://www.scala-sbt.org/sbt-native-packager/universal.html">native packager plugin</a>. If your app only contains one process, the following default web process is generated:</p>

<pre><code>web: target/universal/stage/bin/{your project name} -Dhttp.port=$PORT</code></pre>

<p>Note: <code>JAVA_OPTS</code> is read by the generated script and does not need to be passed into the process.</p>

<h2 id="supported-versions">Supported versions</h2>

<h3 id="play-1-2-x">Play 1.2.x</h3>

<ul>
<li>1.2.3</li>

<li>1.2.4</li>

<li>1.2.5rc3</li>

<li>1.2.5</li>

<li>1.2.5.3</li>

<li>1.2.6</li>

<li>1.2.7</li>
</ul><h3 id="play-2-x">Play 2.x</h3>

<p>Play 2.x relies on sbt dependency resolution so all versions are available as soon as they are released.</p>

<h2 id="add-ons">Add-ons</h2>

<p>A Postgres database is automatically provisioned for Play framework applications. This populates the DATABASE_URL environment variable.</p>